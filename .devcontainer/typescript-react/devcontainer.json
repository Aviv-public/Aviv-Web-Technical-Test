{
	"name": "TypeScript React",
	"dockerComposeFile": "docker-compose.yml",
	"service": "app",
	"workspaceFolder": "/workspaces/${localWorkspaceFolderBasename}/typescript-react",
	"features": {
		"ghcr.io/devcontainers/features/sshd:1": {
			"version": "latest"
		},
		"ghcr.io/devcontainers/features/github-cli:1": {
			"installDirectlyFromGitHubRelease": false,
			"version": "latest"
		}
	},
	"customizations": {
		"vscode": {
			"settings": {
				"git.openRepositoryInParentFolders": "always"
			}
		}
	},
	"forwardPorts": [5173, 8080, 80, 5432],
	"portsAttributes": {
		"5173": {
			"label": "React application",
			"onAutoForward": "openPreview"
		},
		"5432": {
			"label": "Postgres database"
		},
		"8080": {
			"label": "Backend API"
		},
		"80": {
			"label": "OpenAPI schema"
		}
	},
	"remoteEnv": {
		"VITE_BACKEND_API_HOST": "${localEnv:CODESPACE_NAME}-8080.${localEnv:GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN}",
		"REDOC_URL": "https://redocly.github.io/redoc/?url=https://${localEnv:CODESPACE_NAME}-80.${localEnv:GITHUB_CODESPACES_PORT_FORWARDING_DOMAIN}/listingsapi.yaml"
	},
	"postCreateCommand": "npm ci",
	// We need to wait for some unknown operations to be executed, then
	// enforce private and then apply public, otherwise
	// a bug prevents the port to be turned to public in GitHub-CLI.
	"postStartCommand": "sleep 30 && gh codespace ports visibility 8080:private 80:private -c $CODESPACE_NAME && gh codespace ports visibility 8080:public 80:public -c $CODESPACE_NAME"
}
